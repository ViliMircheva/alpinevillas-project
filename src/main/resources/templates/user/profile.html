<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="bg">
<head>
    <meta charset="UTF-8">
    <title>Профил | AlpineVillas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body{
            margin:0;padding:0;min-height:100vh;
            background-image:url('https://plus.unsplash.com/premium_photo-1661934006517-5c1b24fdc6a9?q=80&w=1332&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            background-size:cover;background-position:center;background-repeat:no-repeat;
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
            display:flex;align-items:center;justify-content:center;
        }
        .overlay{
            position:fixed; inset:0;
            background:rgba(0,0,0,0.55);
        }
        .card{
            position:relative;
            width:min(520px, 92vw);
            padding:28px 30px;
            border-radius:18px;
            background:rgba(20,20,20,0.86);
            color:#fff;
            box-shadow:0 20px 50px rgba(0,0,0,0.45);
            backdrop-filter: blur(7px);
        }
        h1{margin:0 0 14px 0; text-align:center; font-size:26px}
        .muted{opacity:.85; text-align:center; margin:0 0 18px 0}

        .flash{
            padding:12px 14px;
            border-radius:12px;
            margin:0 0 14px 0;
            font-weight:700;
            text-align:center;
        }
        .flash.ok{background:rgba(46,160,67,0.18); border:1px solid rgba(46,160,67,0.45)}
        .flash.err{background:rgba(255,123,123,0.14); border:1px solid rgba(255,123,123,0.45)}

        label{display:block; margin-top:12px; font-weight:700}
        input{
            width:100%;
            padding:11px 12px;
            margin-top:6px;
            border:none;
            border-radius:10px;
            background:rgba(255,255,255,0.12);
            color:#fff;
            font-size:16px;
        }
        input:focus{outline:2px solid #2ea043; background:rgba(255,255,255,0.18)}
        .err{
            color:#ff7b7b;
            font-size:0.92rem;
            margin-top:6px;
            font-weight:600;
        }

        .actions{
            display:flex;
            gap:12px;
            margin-top:18px;
        }
        .btn{
            flex:1;
            padding:12px 14px;
            border:none;
            border-radius:12px;
            cursor:pointer;
            font-weight:800;
            font-size:16px;
        }
        .btn.save{background:#2ea043;color:#fff}
        .btn.save:hover{background:#34b14d}
        .btn.back{
            background:rgba(255,255,255,0.10);
            color:#fff;
        }
        .btn.back:hover{background:rgba(255,255,255,0.16)}
        a{color:inherit; text-decoration:none}
    </style>
</head>
<body>
<div class="overlay"></div>

<div class="card">
    <h1>Моят профил</h1>
    <p class="muted">Редактиране на профила.</p>

    <!-- flash messages -->
    <div th:if="${msg}" class="flash ok" th:text="${msg}"></div>
    <div th:if="${error}" class="flash err" th:text="${error}"></div>

    <form th:action="@{/profile}" th:object="${profile}" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <label>Потребителско име</label>
        <input type="text" th:field="*{username}" readonly>

        <label>Имейл</label>
        <input type="email" th:field="*{email}" placeholder="email@example.com">
        <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="err"></div>

        <div class="actions">
            <button type="submit" class="btn save">Запази</button>
            <a class="btn back" th:href="@{/villas}">Назад</a>
        </div>
    </form>
</div>
</body>
</html>
